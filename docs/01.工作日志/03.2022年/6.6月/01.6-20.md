---
title: 6-20
date: 2022-06-20 09:59:35
permalink: /pages/c3ff57/
categories:
  - 工作日志
  - 2022年
  - 6月
tags:
  - 
---
## 今日工作内容

- 非医二期药师屏蔽OTC类目开发，商品搜索增加开发和联调
- 数据权限SDK设计已基本完毕，正式进入开发阶段
- OSS改造：了解HSTS原理，输出改造方案，月底必须完成。
- 专利修改


### 如何从浏览器的 HSTS 缓存中删除域？
在设置 HSTS 并测试它时，可能需要清除浏览器x中的 HSTS 缓存。 如果你设置 HSTS 不正确，你可能会访问网站出错，除非你清除数据。 下面是几种常用浏览器的方法。 还要注意，如果你的域在 HSTS 预加载列表中，清除 HSTS 缓存将是无效的，并且无法强制进行 HTTP 连接。

要从 Chrome HSTS 缓存中删除一个域名，请按照以下步骤操作：
1. 访问 chrome://net-internals/#hsts
2. 在 Delete domain security policies下的文本框中输入要删除的域
3. 点击文本框旁边的 Delete 按钮



### OSS https 和 HSTS 改造
apk.360buyimg.com
s.360buyimg.com
storage.jd.com
storage.360buyimg.com

OSS改造内容，大家检查下 apk.360buyimg.com、s.360buyimg.com、storage.jd.com、storage.360buyimg.com 这个四个OSS域名，涉及上传和下载的都需要改造，把需要改造的系统在 
https://joyspace.jd.com/sheets/5fmISZ76QYEZAKJesWhY 列一下。
改造方案：
1、凡是上传后生成的下载链接涉及上面四个域名的，加上 .presignedUrlProtocol(Scheme.HTTPS) 方法即可。
2、下载文件方法改成 https下载。
3、历史数据，直接将URL的前缀 http 换成 https即可。







