---
title: 8-11
date: 2022-08-11 09:59:35
permalink: /pages/c3ff57/
categories:
  - 工作日志
  - 2022年
  - 8月
tags:
  - 
---

## 代码规范简介
1. 为什么需要代码规范？

- 一个软件的生命周期中，80％的花费在于维护
- 几乎没有任何一个软件，在其全部生命周期中，均由最初的开辟人员来维护
- 编码规范可以改良软件的可读性，可以让程序员尽快而彻底地懂得新的代码
- 若是你将源码作为产品公布，就须要确任它是否被很好的打包并且清楚无误，一如你已构建的其它任何产品

无规矩不成方圆，国家如此，学校如此，代码也是如此。和人一样，代码也是需要沟通协作的。没有统一的规范和约束，那么沟通效率就会大打折扣，甚至无法交流，说人话就是别人写的代码我看着特别费劲或者直接看不懂。怎么能让看代码的人轻松点呢？这是一个值得思考的问题。
答案：说大家都能听懂的话。即建立统一的团队代码规范，降低代码信息传递损耗率。有一种说法是，因工期太紧，为快速上线而采取了许多临时处理方案。但从长远来看，长期维护的系统一定会为之前的临时处理付出更大的代价，除非是一次性交付。


2. 什么是好的代码规范
- 信息传递准确无歧义
- 简单易读
- 整洁美观
即，"信达雅"：
“信”（faithfulness）指意义不悖原文，即是译文要准确，不偏离，不遗漏，也不要随意增减意思； “达”（expressiveness）指不拘泥于原文形式，译文通顺明白； “雅”（elegance）则指译文时选用的词语要得体，追求文章本身的古雅，简明优雅。


3. 常见的编码规范有:
- Oracle的 Java 编码规范
官方地址（英文版）：https://www.oracle.com/java/technologies/javase/codeconventions-contents.html
网友翻译：https://www.cnblogs.com/bluestorm/archive/2012/10/04/2711540.html


- Google Java 编程风格指南
官方地址（英文版）：https://google.github.io/styleguide/javaguide.html
网友翻译（中文版）：https://github.com/fantasticmao/google-java-style-guide-zh_cn

常见规定的内容有：
1、命名，包含包名、类名、变量名、方法名等
2、缩进排版，包含行长度，换行等
3、注释：单行注释、块注释、行末注释等

4. 常见问题思考
  1. 空指针
  做为一个Java程序员，这可能是我们遇到的最多的异常，没有之一。那么为什么会产生空指针？
  说简单也简单，不就是当一个变量为空时，直接使用产生的吗？
  是的,但是这只是表象，我们继续思考下，反复问自己几遍，到底为何会出现空指针？
  从技术角度来看没有任何意义，因为每个变量都可能为空。
  从业务角度来看，产生空指针的原因只有两个：
  1、变量本身就可能为空，但我们没有做校验。比如jsf入参、SDK初始化配置参数等相关变量都可能为空，此时涉及的所有相关变量都需要提前校验。
  2、变量本身就不可能为空，说明我们的业务逻辑出现了问题，此时需要判空然后直接抛异常。例如某业务处理中间处理需要根据用户ID查询用户信息，但用户信息为空。
  第二种情况无需赘述，判空直接抛异常即可。第一种情况，需要判空后再使用。那么问题来了，如果需要判空，具体应该在哪里判空呢？
  答：分情况而定
  1、接口入参：直接在入口时校验。例如一个JSF接口的参数校验，他最合适的校验时机是放在facade层，不需要在service、dao层重复校验。
  2、方法入参：如果该方法是在固定在一个流程中使用，且在该流程中在调用过该方法前已经校验，那么无需校验；如果自己不放心别人的校验结果，那么可添加校验。（重点是一个完整的业务流程是否是同一个人写的。
  
  总结：盯紧每一个变量，需时刻保持对该变量可能为空的敏感性。出现了空指针，表面上看是对一个变量在其作用域中值变化缺乏掌控，本质是业务的理解不够深刻。

  2. 命名
  - 见名知意，慎之又慎
  - 每个概念对应一个词，从始至终
  
  3. 方法应该如何写
  - 一个方法只做一件事（重要）
  - 方法应该尽量短小，尽量不要超过20行（个人觉得有点苛刻了，不超过50行就行）
  - 不要在参数中返回结果
  - 没有副作用（校验租户参数）
  - 使用异常代替错误码
  - 别传null值，也别返回null
  - 方法的组织结构：依调用顺序由上到下;同类型内聚
  
  4. 日志
  - log.info 和 log.error 正确使用
  - log 中{}个数和参数一定要对齐
  - log.error("xxx | error"),记得加上 “error”字样，搜日志时方便快捷。
  - 打印日志时，加上类名和方法名 
  - 日志不可多，也不可少。多了，会影响性能。少了，排查问题十分困难。
  - 关键节点一定要打日志

《代码整洁之道》


  









