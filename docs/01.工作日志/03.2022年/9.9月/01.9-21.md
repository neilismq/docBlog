---
title: 9-21
date: 2022-09-21 09:59:35
permalink: /pages/c3ff57/
categories:
  - 工作日志
  - 2022年
  - 9月
tags:
  - 
---

## 今日工作内容
1. 我京-问医生ISV联调


2022/09/21日晚9点，业务反馈医生集团管理平台导出对账单时，杭州获医贝公司机构导出对账单时出现了华卫海迈的数据
【问题描述】：杭州获医贝公司机构导出对账单时出现了华卫海迈的数据
【影响范围】：已排查所有历史导出数据，只影响上述1例导出结果，其他机构无影响
【问题来源】：业务告知
【问题原因】：由于之前存在机构数据量太大导致机器内存溢出的问题，后续对导出功能进行优化，用阻塞队列限制了使用内存，并用多线程并行导出数据。但队列没有做用户隔离，多人并行导出时会产生数据错乱问题。
【问题进度】：导出功能已限制，待修复后重新上线
【目前风险】：无风险
【跟进团队】：京东集团-京东健康-技术产品部-互联网医疗研发部-运营平台研发组
【责任团队】：京东集团-京东健康-技术产品部-互联网医疗研发部-运营平台研发组


class NethpHospitalAskDoctorConfigGroovy{

    @Resource
    private CommonHandler commonHandler;
  
    Map<String, Object> lunch(String floorId, CommonRequest commonRequest, Map<String, Object> paramsMap) {
                
        // 获取登录人pin
        Map requestParam = new HashMap<>();
        requestParam.put("pin",commonRequest.getPin());
        requestParam.put("class","java.lang.String");

        def args =new Object[1];
        args[0] = requestParam;

        def result = commonHandler.doServiceByJsf(floorId,args);
 
       // 返回结果
       Map<String,Object> resMap = new HashMap<>();
       resMap.put("result",result);
 
       return resMap;
    }
}


http://jdhomecore.m.jd.care/jdhome/getGroovy?pin=panda0401&clientVersion=11.8.0&build=1111&client=android&d_brand=Xiaomi&d_model=RedmiNote8&osVersion=9&screen=2130*1080&partner=jingdong&oaid=7611f4947e43ae5f&eid=eidA9a2d8120f4seGA3aG37YTLKzmQN7yI7YaRgN25F5Ajnfz4U73d4tWEAGTJluN8RMblp6bF6nAwOSXPtYUwhrOZDDXj9NjYFdF8jFjR4gaai+HH55&sdkVersion=28&lang=zh_CN&uuid=cbceff743da6d622&aid=cbceff743da6d622&area=1_2809_0_0&networkType=wifi&wifiBssid=unknown&uts=0f31TVRjBSsqndu4%252FjgUPz6uymy50MQJhUNdHI1ZwYS3LEOhxQnDFJSoB4B4WXUatXr9eATi6RemknDhQSIsyZ12b2KGJrFUNQugJ%252Bl5sG7vLfXbT39UDRPcg3%252F2d7i7DAmn7g7CDoUgj05dwNkn6iQhWlxCTPs1YlgNyP5lhDVIR184wlVB6RMctS%252Fe5gw92FV3sZ7I7ED0azc5YmCgVQ%253D%253D&st=1612423881742&sign=aed87693840faf706fbae93bf13936a7&body=%7B%22flooIds%22:%5B%22flo_1300%22%5D%7D%0A%0A%0A%0A%0A%0A


https://111.13.149.166:443/uploadFile/upload", host: "doctorcrm.jd.com", 


[
  1,
  "http://storage.jd.local/cps-template/mini%E5%95%86%E8%AF%A6-%E7%B1%BB%E7%9B%AE%E7%BB%B4%E5%BA%A6%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF20220927.xlsx?Expires=1664259421&AccessKey=TAr2KsqW5NzIsfHE&Signature=3Kyd1CrJKxxVXVB%2Bwx0FL7eoPmw%3D"
]









  










