---
title: Git命令自动补全(mac zsh)
date: 2022-11-07 23:04:06
permalink: /pages/4a260d/
categories:
  - 常用工具
  - Git
tags:
  - 
---


1. 查看是否安装`bash-completion`

::: tip
`bash-completion`是macOS一个命令行补全库，用`tab`操作。
[详细介绍](https://sourabhbajaj.com/mac-setup/BashCompletion/)
:::

```sh
brew list|grep bash-completion
```

2. 没有安装则安装

```sh
brew install bash-completion
```

`bash-completion`默认安装目录为：`/usr/local/etc/bash_completion.d`

3. 查看已安装的包详细信息

```sh
brew info bash-completion
```

4. 新建`~/.zsh_fpath/`目录

```sh
mkdir ~/.zsh_fpath
```
5. 下载 git-completion.zsh
```sh
curl https://github.com/git/git/raw/master/contrib/completion/git-completion.zsh -OL
```
或者
```sh
git clone https://github.com/git/git.git
```
然后把 `/contrib/completion/git-completion.zsh` 复制也可以

6. 拷贝git-completion.zsh
将git源码下的.git-completion.zsh移动到~/.zsh_fpath目录下

```sh
mv git-completion.zsh ~/.zsh_fpath/
```
7. 修改 ~/.zshrc 文件

```sh
# git 自动补全
zstyle ':completion:*:*:git:*' script ~/.zsh_fpath/.git-completion.zsh
fpath=(~/.zsh_fpath $fpath)
autoload -Uz compinit && compinit
```
保存退出。

8. terminal显示git分支
在`.zshrc`最后添加：

```sh
# git 显示分支名
function parse_git_branch() {
    git branch 2> /dev/null | sed -n -e 's/^\* \(.*\)/[\1]/p'
}

setopt PROMPT_SUBST
export PROMPT='%F{grey}%n%f %F{cyan}%~%f %F{green}$(parse_git_branch)%f %F{normal}$%f '
```

8. 重启终端








